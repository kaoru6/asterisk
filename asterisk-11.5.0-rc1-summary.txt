                                Release Summary

                              asterisk-11.5.0-rc1

                                Date: 2013-06-10

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release includes only bug fixes. The changes included were made only
   to address problems that have been identified in this release series.
   Users should be able to safely upgrade to this version if this release
   series is already in use. Users considering upgrading from a previous
   release series are strongly encouraged to review the UPGRADE.txt document
   as well as the CHANGES document for information about upgrading to this
   release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-11.4.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were closed by commits that went into this
   release.

     Coders                   Testers                  Reporters              
   17 alecdavis             12 alecdavis             9 coreyfarrell           
   10 elguero               7 mjordan                7 alecdavis              
   7 Corey Farrell          6 sruffell               2 elguero                
   7 rmudgett               6 Tony Lewis             2 isrl                   
   6 dlee                   5 elguero                2 mpaland                
   6 sruffell               2 Corey Farrell          2 nikola.ciprich         
   4 mjordan                1 abelbeck               2 pk16208                
   4 qwell                  1 Andrew Latham          2 rnewton                
   3 newtonr                1 Dan Martens            1 abelbeck               
   3 seanbright             1 David Brillert         1 blkline                
   2 igorg                  1 Dmitry Melekhov        1 dbohling               
   2 kmoore                 1 Ishfaq Malik           1 dlmarten               
   2 may                    1 Jaco Kroon             1 falves11               
   1 Correy Farrell         1 JoshE                  1 floradio               
   1 file                   1 jrose                  1 giacomo                
   1 gknispel               1 Nikola Ciprich         1 gian                   
   1 Guenther Kelleter      1 Peter Katzmann         1 gkelleter              
   1 jrose                  1 Pietro Bertera         1 gknispel               
   1 Karsten Wemheuer       1 rmudgett               1 greenlightcrm          
   1 kawasaki               1 Rodrigo P. Telles      1 herzer                 
   1 Michael Walton         1 Tzafrir Cohen          1 ishmalik               
   1 mmichelson             1 William luke           1 jcovert                
   1 oej                                             1 jhoppebugs             
   1 one47                                           1 jkroon                 
   1 pbertera                                        1 kawasaki               
   1 russell                                         1 kiennd                 
   1 tzafrir                                         1 mike@farsouthnet.com   
                                                     1 mjordan                
                                                     1 n8ideas                
                                                     1 pgoldbaum              
                                                     1 remiq                  
                                                     1 slesru                 
                                                     1 telles                 
                                                     1 usinternet             
                                                     1 volga629               

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Category: Addons/chan_ooh323

   ASTERISK-21800: ooh323 channels stuck if no gatekeer or ooh323 reload
   Revision: 390228
   Reporter: slesru
   Testers: Dmitry Melekhov
   Coders: may

  Category: Applications/app_mixmonitor

   ASTERISK-21799: [patch] Dropouts/distortion in MixMonitor recording when
   recording RTP with ptime of 60ms
   Revision: 389896
   Reporter: mike@farsouthnet.com
   Testers: jrose
   Coders: Michael Walton

  Category: Applications/app_page

   ASTERISK-19883: [patch] - RTP packet with Timestamp=0 on Multicast paging
   Revision: 385637
   Reporter: giacomo
   Testers: Pietro Bertera, Tzafrir Cohen
   Coders: tzafrir, pbertera

  Category: Applications/app_queue

   ASTERISK-21397: [patch] manager crash on unloading app_queue
   Revision: 385594
   Reporter: pk16208
   Testers: Corey Farrell
   Coders: elguero

   ASTERISK-21738: [patch] Segfault On Realtime Queue Members Processing
   Revision: 388108
   Reporter: n8ideas
   Testers: JoshE
   Coders: elguero

   ASTERISK-21782: Delayed audio to agent when answering a queue call
   Revision: 391241
   Reporter: remiq
   Coders: mjordan

  Category: Applications/app_voicemail

   ASTERISK-18207: externnotify script called with (null) context parameter
   during pollmessages run, essentially stopping it from running.
   Revision: 384326
   Reporter: blkline
   Coders: Karsten Wemheuer

   ASTERISK-19431: Asterisk Russian language support missing voicemail
   prompts
   Revision: 386878
   Reporter: volga629
   Coders: newtonr

   ASTERISK-21302: [patch] app_voicemail crashes on config error and there
   are some potential memory leaks
   Revision: 385557
   Reporter: jkroon
   Testers: Jaco Kroon, elguero
   Coders: elguero

  Category: CDR/General

   ASTERISK-21394: [patch] - Fundamental changes to CDR within single
   asterisk family (1.8) during externally initiated blind transfers with an
   h extension present
   Revision: 387038
   Reporter: ishmalik
   Testers: Ishfaq Malik, mjordan
   Coders: one47

  Category: Channels/chan_agent

   ASTERISK-21793: Segmentation fault when dealing with Agent channels
   Revision: 390047
   Reporter: telles
   Testers: Rodrigo P. Telles
   Coders: rmudgett

  Category: Channels/chan_alsa

   ASTERISK-21329: chan_alsa: patch for crash when audio device in unexpected
   state
   Revision: 385634
   Reporter: kawasaki
   Coders: kawasaki

  Category: Channels/chan_dahdi

   ASTERISK-21151: 'Squelching' early media in DAHDI (sig_pri)
   Revision: 384689
   Reporter: gian
   Testers: rmudgett
   Coders: rmudgett

   ASTERISK-21744: [patch] - fix lower bound check with -ve integer
   conversion from a float
   Revision: 387298
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Channels/chan_iax2

   ASTERISK-21409: [patch] - Race condition with IAX2 transfer, 2 releases
   happen on same call legs. locks up with many threads blocked by
   iax2_destroy_helper
   Revision: 391063
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Channels/chan_sip/General

   ASTERISK-17436: random deadlocks - SIP messages not being processed
   Revision: 386159
   Reporter: usinternet
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-19754: Deadlock in chan_sip / pthread_timing
   Revision: 386159
   Reporter: nikola.ciprich
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-20225: Segmentation Fault on manager_play_dtmf sip_senddigit_end
   Revision: 385173
   Reporter: jhoppebugs
   Coders: mjordan

   ASTERISK-21246: [patch] use of rtpkeepalive uses CN packet with marker bit
   set, plus a ULAW payload instead of CN
   Revision: 388112
   Reporter: pk16208
   Testers: Peter Katzmann, elguero
   Coders: elguero

   ASTERISK-21374: [patch] One-way Audio With auto_* NAT Settings When SIP
   Calls Initiated By PBX
   Revision: 385473
   Reporter: elguero
   Testers: elguero
   Coders: elguero

   ASTERISK-21374: [patch] One-way Audio With auto_* NAT Settings When SIP
   Calls Initiated By PBX
   Revision: 388601
   Reporter: elguero
   Testers: elguero
   Coders: elguero

   ASTERISK-21389: res_timing_pthread fails to return from write, causing
   timer dependent operations to block indefinitely
   Revision: 386159
   Reporter: mjordan
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-21466: [patch] [crash] command (sip show peers) crashes Asterisk
   with ~3500 registered peers
   Revision: 387134
   Reporter: gknispel
   Coders: gknispel

   ASTERISK-21677: NOTIFYs for BLF start queuing up and fail to be sent out
   Revision: 387880
   Reporter: dlmarten
   Testers: Dan Martens, David Brillert, alecdavis
   Coders: alecdavis

   ASTERISK-21742: SIP Session-Expires: Set timer to correctly expire at
   (~2/3) of the expiry interval when not the refresher.
   Revision: 387345
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Channels/chan_sip/Interoperability

   ASTERISK-21664: Asterisk terminates calls if Session-Expires isn't present
   on INVITE
   Revision: 387319
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Channels/chan_unistim

   ASTERISK-21061: Nortel I2004 unwanted autoanswer
   Revision: 389661
   Reporter: herzer
   Coders: igorg

   ASTERISK-21120: Unable to properly hang up calls when second line rings
   Revision: 389661
   Reporter: dbohling
   Coders: igorg

  Category: Codecs/codec_resample

   ASTERISK-21401: [patch] codec_resample cannot be unloaded
   Revision: 385582
   Reporter: coreyfarrell
   Testers: Corey Farrell
   Coders: Corey Farrell

  Category: Core/Bridging

   ASTERISK-21356: Segfault during bridge channel proxy inspection in a
   masquerade caused by an AMI Redirect of two channels
   Revision: 386286
   Reporter: greenlightcrm
   Testers: William luke
   Coders: rmudgett

  Category: Core/BuildSystem

   ASTERISK-21125: Asterisk 11 needs libuuid in configure script due to
   pjproject
   Revision: 385356
   Reporter: falves11
   Coders: qwell

  Category: Core/Channels

   ASTERISK-21356: Segfault during bridge channel proxy inspection in a
   masquerade caused by an AMI Redirect of two channels
   Revision: 386286
   Reporter: greenlightcrm
   Testers: William luke
   Coders: rmudgett

  Category: Core/Configuration

   ASTERISK-21412: [patch] config.c/config_text_file_load() leaks globbuf
   Revision: 386677
   Reporter: coreyfarrell
   Coders: Corey Farrell

  Category: Core/General

   ASTERISK-21407: [patch] features_shutdown doesn't finish cleanup
   Revision: 386642
   Reporter: coreyfarrell
   Coders: Corey Farrell

   ASTERISK-21716: [patch] logger thread sometimes exits with messages still
   queued
   Revision: 389677
   Reporter: coreyfarrell
   Coders: Corey Farrell

   ASTERISK-21724: [patch] __ast_rwlock_destroy can segfault with
   DEBUG_THREADS
   Revision: 388839
   Reporter: coreyfarrell
   Coders: Corey Farrell

   ASTERISK-21743: [patch] - Core show Locks, Include Asterisk version.
   Revision: 387295
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Core/Logging

   ASTERISK-21430: [patch] Call ID missing when logging through syslog
   Revision: 388605
   Reporter: nikola.ciprich
   Testers: Nikola Ciprich, elguero
   Coders: elguero

  Category: Core/ManagerInterface

   ASTERISK-21397: [patch] manager crash on unloading app_queue
   Revision: 385594
   Reporter: pk16208
   Testers: Corey Farrell
   Coders: elguero

  Category: Core/PBX

   ASTERISK-21723: [patch] pbx cleanup is incomplete
   Revision: 388578
   Reporter: coreyfarrell
   Coders: Correy Farrell

  Category: Resources/res_config_ldap

   ASTERISK-17386: [patch] res_config_ldap with malloc_debug produces
   munmap_chunk(): invalid pointer:
   Revision: 385199
   Reporter: jcovert
   Testers: Andrew Latham
   Coders: seanbright

  Category: Resources/res_jabber

   ASTERISK-21429: Distributed Device State using JABBER/XMPP not working
   since Secuity Advisory AST-2012-015
   Revision: 385917
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21429: Distributed Device State using JABBER/XMPP not working
   since Secuity Advisory AST-2012-015
   Revision: 385938
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Resources/res_musiconhold

   ASTERISK-17467: external moh is blocked when using dahdi timer
   Revision: 386159
   Reporter: isrl
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

  Category: Resources/res_rtp_asterisk

   ASTERISK-21246: [patch] use of rtpkeepalive uses CN packet with marker bit
   set, plus a ULAW payload instead of CN
   Revision: 388112
   Reporter: pk16208
   Testers: Peter Katzmann, elguero
   Coders: elguero

   ASTERISK-21522: [patch] DTMF end is not always processed, causes one-way
   audio
   Revision: 387216
   Reporter: coreyfarrell
   Coders: Corey Farrell

  Category: Resources/res_srtp

   ASTERISK-21719: [patch] res_srtp doesn't cleanup srtp library
   Revision: 388530
   Reporter: coreyfarrell
   Coders: Corey Farrell

   ASTERISK-21719: [patch] res_srtp doesn't cleanup srtp library
   Revision: 388769
   Reporter: coreyfarrell
   Coders: kmoore

  Category: Resources/res_timing_pthread

   ASTERISK-17436: random deadlocks - SIP messages not being processed
   Revision: 386159
   Reporter: usinternet
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-17458: Deadlocks when using pthread timer
   Revision: 386159
   Reporter: isrl
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-19754: Deadlock in chan_sip / pthread_timing
   Revision: 386159
   Reporter: nikola.ciprich
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-20577: Asterisk deadlocks waiting for timer in res_timing_pthread
   while running AGI script
   Revision: 386159
   Reporter: kiennd
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-21389: res_timing_pthread fails to return from write, causing
   timer dependent operations to block indefinitely
   Revision: 386159
   Reporter: mjordan
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

  Category: Resources/res_xmpp

   ASTERISK-21069: xmpp distributed device states aggregation update fails
   Revision: 385917
   Reporter: mpaland
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21069: xmpp distributed device states aggregation update fails
   Revision: 385938
   Reporter: mpaland
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21164: Need clarification on distributed device state behavior
   and whether this behavior is a possible regression
   Revision: 385917
   Reporter: rnewton
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21164: Need clarification on distributed device state behavior
   and whether this behavior is a possible regression
   Revision: 385938
   Reporter: rnewton
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21429: Distributed Device State using JABBER/XMPP not working
   since Secuity Advisory AST-2012-015
   Revision: 385917
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21429: Distributed Device State using JABBER/XMPP not working
   since Secuity Advisory AST-2012-015
   Revision: 385938
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21785: __ao2_ref_debug() logs to /tmp/refs when REF_DEBUG is not
   defined
   Revision: 388700
   Reporter: abelbeck
   Testers: abelbeck
   Coders: rmudgett

  Category: Sounds

   ASTERISK-19431: Asterisk Russian language support missing voicemail
   prompts
   Revision: 386878
   Reporter: volga629
   Coders: newtonr

   ASTERISK-19721: Asterisk core sounds, italian version
   Revision: 386878
   Reporter: floradio
   Coders: newtonr

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   directly close an issue from the issue tracker. The commits may have been
   marked as being related to an issue. If that is the case, the issue
   numbers are listed here, as well.

   +------------------------------------------------------------------------+
   | Revision | Author     | Summary                    | Issues Referenced |
   |----------+------------+----------------------------+-------------------|
   | 384411   | dlee       | Fix parallel make          |                   |
   |          |            | problems.                  |                   |
   |----------+------------+----------------------------+-------------------|
   | 384414   | file       | Remove silly use of        |                   |
   |          |            | strncmp.                   |                   |
   |----------+------------+----------------------------+-------------------|
   | 384545   | dlee       | Fixed spurious rebuilds of |                   |
   |          |            | func_version.              |                   |
   |----------+------------+----------------------------+-------------------|
   | 384641   | mjordan    | Update documentation for   |                   |
   |          |            | CHANNEL function           |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Fix For Not Overriding The |                   |
   | 384827   | elguero    | Default Settings In        | ASTERISK-21225    |
   |          |            | chan_sip                   |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Modified the list of keys  |                   |
   | 385048   | newtonr    | for the driver backends    |                   |
   |          |            | for sake of sample clarity |                   |
   |----------+------------+----------------------------+-------------------|
   | 385313   | rmudgett   | Fix 'pri intense debug     |                   |
   |          |            | span' alias.               |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | IAX2, prevent network      |                   |
   | 385403   | alecdavis  | thread starting before all | ASTERISK-18827    |
   |          |            | helper threads are ready   |                   |
   |----------+------------+----------------------------+-------------------|
   | 385430   | alecdavis  | IAX2 defer_full_frames     | ASTERISK-18827    |
   |          |            | fail to get sent           |                   |
   |----------+------------+----------------------------+-------------------|
   | 385689   | dlee       | Fix the svn:keywords       |                   |
   |          |            | property on several files. |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Don't unnecessarily        |                   |
   | 385768   | qwell      | rebuild things on every    |                   |
   |          |            | run of 'make'.             |                   |
   |----------+------------+----------------------------+-------------------|
   | 386006   | dlee       | Fix lock errors on         |                   |
   |          |            | startup.                   |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | cli.c: Properly initialize |                   |
   | 386051   | dlee       | debug_modules and          |                   |
   |          |            | verbose_modules.           |                   |
   |----------+------------+----------------------------+-------------------|
   | 386484   | elguero    | Change Case On Forcerport  |                   |
   |          |            | For Consistency            |                   |
   |----------+------------+----------------------------+-------------------|
   | 386486   | elguero    | Fix Displaying Symmetric   |                   |
   |          |            | RTP Global Setting         |                   |
   |----------+------------+----------------------------+-------------------|
   | 386794   | oej        | Play periodic prompts for  |                   |
   |          |            | first call in a call queue |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Use the proper lower bound |                   |
   | 386930   | seanbright | when doing saturation      |                   |
   |          |            | arithmetic.                |                   |
   |----------+------------+----------------------------+-------------------|
   | 387030   | jrose      | Add forgotten event types  |                   |
   |          |            | to event_names array       |                   |
   |----------+------------+----------------------------+-------------------|
   | 387422   | mjordan    | Update utils Makefile to   |                   |
   |          |            | handle r387294             |                   |
   |----------+------------+----------------------------+-------------------|
   | 387689   | russell    | Make SLA reload more       |                   |
   |          |            | paranoid.                  |                   |
   |----------+------------+----------------------------+-------------------|
   | 387823   | dlee       | Minor fixups to Doxygen    |                   |
   |          |            | comments.                  |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Fix copy/paste error in    |                   |
   | 388253   | seanbright | one-touch-recording        |                   |
   |          |            | implementation.            |                   |
   |----------+------------+----------------------------+-------------------|
   | 388378   | mmichelson | Fix memory leak in         |                   |
   |          |            | pbx_dundi                  |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Add version.c to list of   |                   |
   | 388424   | rmudgett   | ignored files in the utils |                   |
   |          |            | directory.                 |                   |
   |----------+------------+----------------------------+-------------------|
   | 388597   | kmoore     | Revert r388529 for now     |                   |
   |----------+------------+----------------------------+-------------------|
   | 388816   | qwell      | Fix VM snapshot handling   |                   |
   |          |            | for combined INBOX.        |                   |
   |----------+------------+----------------------------+-------------------|
   | 389245   | qwell      | Add doxygen.log to         |                   |
   |          |            | svn:ignore property.       |                   |
   |----------+------------+----------------------------+-------------------|
   | 390229   | may        | remove unnecessary         | ASTERISK-21800    |
   |          |            | declarations               |                   |
   |----------+------------+----------------------------+-------------------|
   | 391084   | alecdavis  | IAX2: refactor             |                   |
   |          |            | nativebridge transfer      |                   |
   |----------+------------+----------------------------+-------------------|
   | 391111   | alecdavis  | fix bad edit after         |                   |
   |          |            | conflict resolution        |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | chan_iax2: nativebridge    |                   |
   | 391148   | alecdavis  | refactor, missed unlock    |                   |
   |          |            | bridgecallno               |                   |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 CHANGES                          |    9
 Makefile                         |   35 +-
 UPGRADE.txt                      |   10
 addons/chan_ooh323.c             |   10
 apps/app_meetme.c                |   11
 apps/app_queue.c                 |   72 +++--
 apps/app_voicemail.c             |   81 +++---
 build_tools/menuselect-deps.in   |    1
 channels/chan_alsa.c             |    7
 channels/chan_dahdi.c            |   40 ++-
 channels/chan_iax2.c             |  114 +++++---
 channels/chan_sip.c              |  519 ++++++++++++++++++++++++---------------
 channels/chan_unistim.c          |   18 +
 channels/misdn/isdn_msg_parser.c |    2
 channels/sig_pri.c               |    4
 channels/sig_pri.h               |    2
 channels/sip/include/sip.h       |    1
 codecs/codec_resample.c          |    2
 configs/chan_dahdi.conf.sample   |   12
 configs/cli_aliases.conf.sample  |    2
 configs/extconfig.conf.sample    |    6
 configs/queues.conf.sample       |    7
 configure.ac                     |    5
 funcs/func_channel.c             |   14 +
 include/asterisk/astobj2.h       |   37 ++
 include/asterisk/autoconfig.h.in |    6
 include/asterisk/utils.h         |   12
 main/astobj2.c                   |   24 +
 main/channel.c                   |   23 +
 main/cli.c                       |    4
 main/config.c                    |    6
 main/devicestate.c               |   13
 main/event.c                     |    2
 main/features.c                  |   24 -
 main/lock.c                      |    2
 main/logger.c                    |   15 -
 main/manager.c                   |   16 -
 main/message.c                   |   62 +---
 main/pbx.c                       |    5
 main/slinfactory.c               |    2
 main/utils.c                     |    6
 makeopts.in                      |    3
 pbx/pbx_dundi.c                  |    3
 res/res_config_ldap.c            |   20 -
 res/res_config_pgsql.c           |    4
 res/res_jabber.c                 |    5
 res/res_mutestream.c             |    2
 res/res_rtp_asterisk.c           |   18 -
 res/res_rtp_multicast.c          |   43 +++
 res/res_srtp.c                   |    3
 res/res_timing_pthread.c         |  121 ++++-----
 res/res_xmpp.c                   |    5
 sounds/Makefile                  |    5
 utils/Makefile                   |    6
 54 files changed, 965 insertions(+), 516 deletions(-)

     ----------------------------------------------------------------------
