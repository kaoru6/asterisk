                                Release Summary

                             asterisk-1.8.23.0-rc1

                                Date: 2013-06-10

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release includes only bug fixes. The changes included were made only
   to address problems that have been identified in this release series.
   Users should be able to safely upgrade to this version if this release
   series is already in use. Users considering upgrading from a previous
   release series are strongly encouraged to review the UPGRADE.txt document
   as well as the CHANGES document for information about upgrading to this
   release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-1.8.22.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were closed by commits that went into this
   release.

     Coders                   Testers                  Reporters              
   14 alecdavis             9 alecdavis              8 coreyfarrell           
   6 Corey Farrell          7 mjordan                6 alecdavis              
   6 elguero                6 sruffell               2 isrl                   
   6 sruffell               6 Tony Lewis             2 pk16208                
   5 rmudgett               3 elguero                1 avezina@ubikvoip.com   
   4 dlee                   1 Alexandre Vezina       1 blkline                
   4 mjordan                1 Andrew Latham          1 dlmarten               
   3 newtonr                1 Corey Farrell          1 elguero                
   2 kmoore                 1 Dan Martens            1 floradio               
   2 qwell                  1 David Brillert         1 giacomo                
   2 seanbright             1 Dmitry Melekhov        1 gian                   
   1 Correy Farrell         1 Ishfaq Malik           1 gkelleter              
   1 gknispel               1 Jaco Kroon             1 gknispel               
   1 Guenther Kelleter      1 jrose                  1 greenlightcrm          
   1 Karsten Wemheuer       1 Peter Katzmann         1 ishmalik               
   1 kawasaki               1 Pietro Bertera         1 jcovert                
   1 may                    1 rmudgett               1 jhoppebugs             
   1 Michael Walton         1 Rodrigo P. Telles      1 jkroon                 
   1 mmichelson             1 Tzafrir Cohen          1 kawasaki               
   1 oej                    1 William luke           1 kiennd                 
   1 one47                                           1 mike@farsouthnet.com   
   1 pbertera                                        1 mjordan                
   1 russell                                         1 mpaland                
   1 tzafrir                                         1 nikola.ciprich         
                                                     1 pgoldbaum              
                                                     1 remiq                  
                                                     1 rnewton                
                                                     1 slesru                 
                                                     1 telles                 
                                                     1 usinternet             
                                                     1 volga629               

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Category: Addons/chan_ooh323

   ASTERISK-21800: ooh323 channels stuck if no gatekeer or ooh323 reload
   Revision: 390181
   Reporter: slesru
   Testers: Dmitry Melekhov
   Coders: may

  Category: Applications/app_mixmonitor

   ASTERISK-21799: [patch] Dropouts/distortion in MixMonitor recording when
   recording RTP with ptime of 60ms
   Revision: 389895
   Reporter: mike@farsouthnet.com
   Testers: jrose
   Coders: Michael Walton

  Category: Applications/app_page

   ASTERISK-19883: [patch] - RTP packet with Timestamp=0 on Multicast paging
   Revision: 385636
   Reporter: giacomo
   Testers: Pietro Bertera, Tzafrir Cohen
   Coders: tzafrir, pbertera

  Category: Applications/app_queue

   ASTERISK-21397: [patch] manager crash on unloading app_queue
   Revision: 385593
   Reporter: pk16208
   Testers: Corey Farrell
   Coders: elguero

   ASTERISK-21782: Delayed audio to agent when answering a queue call
   Revision: 391215
   Reporter: remiq
   Coders: mjordan

  Category: Applications/app_voicemail

   ASTERISK-18207: externnotify script called with (null) context parameter
   during pollmessages run, essentially stopping it from running.
   Revision: 384325
   Reporter: blkline
   Coders: Karsten Wemheuer

   ASTERISK-19431: Asterisk Russian language support missing voicemail
   prompts
   Revision: 386877
   Reporter: volga629
   Coders: newtonr

   ASTERISK-21302: [patch] app_voicemail crashes on config error and there
   are some potential memory leaks
   Revision: 385551
   Reporter: jkroon
   Testers: Jaco Kroon, elguero
   Coders: elguero

  Category: CDR/General

   ASTERISK-21394: [patch] - Fundamental changes to CDR within single
   asterisk family (1.8) during externally initiated blind transfers with an
   h extension present
   Revision: 387036
   Reporter: ishmalik
   Testers: Ishfaq Malik, mjordan
   Coders: one47

  Category: Channels/chan_agent

   ASTERISK-21793: Segmentation fault when dealing with Agent channels
   Revision: 390044
   Reporter: telles
   Testers: Rodrigo P. Telles
   Coders: rmudgett

  Category: Channels/chan_alsa

   ASTERISK-21329: chan_alsa: patch for crash when audio device in unexpected
   state
   Revision: 385633
   Reporter: kawasaki
   Coders: kawasaki

  Category: Channels/chan_dahdi

   ASTERISK-21151: 'Squelching' early media in DAHDI (sig_pri)
   Revision: 384685
   Reporter: gian
   Testers: rmudgett
   Coders: rmudgett

   ASTERISK-21744: [patch] - fix lower bound check with -ve integer
   conversion from a float
   Revision: 387297
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Channels/chan_iax2

   ASTERISK-21409: [patch] - Race condition with IAX2 transfer, 2 releases
   happen on same call legs. locks up with many threads blocked by
   iax2_destroy_helper
   Revision: 391062
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Channels/chan_sip/General

   ASTERISK-17436: random deadlocks - SIP messages not being processed
   Revision: 386109
   Reporter: usinternet
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-19754: Deadlock in chan_sip / pthread_timing
   Revision: 386109
   Reporter: nikola.ciprich
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-20225: Segmentation Fault on manager_play_dtmf sip_senddigit_end
   Revision: 385170
   Reporter: jhoppebugs
   Coders: mjordan

   ASTERISK-21225: [patch] Setting nat=force_rport in [general] sip.conf will
   never work
   Revision: 385008
   Reporter: avezina@ubikvoip.com
   Testers: Alexandre Vezina, elguero
   Coders: elguero

   ASTERISK-21243: [patch] Backport Appropiate NAT Setting Cleanups To 1.8
   Revision: 384779
   Reporter: elguero
   Coders: elguero

   ASTERISK-21246: [patch] use of rtpkeepalive uses CN packet with marker bit
   set, plus a ULAW payload instead of CN
   Revision: 388111
   Reporter: pk16208
   Testers: Peter Katzmann, elguero
   Coders: elguero

   ASTERISK-21389: res_timing_pthread fails to return from write, causing
   timer dependent operations to block indefinitely
   Revision: 386109
   Reporter: mjordan
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-21466: [patch] [crash] command (sip show peers) crashes Asterisk
   with ~3500 registered peers
   Revision: 387133
   Reporter: gknispel
   Coders: gknispel

   ASTERISK-21677: NOTIFYs for BLF start queuing up and fail to be sent out
   Revision: 387875
   Reporter: dlmarten
   Testers: Dan Martens, David Brillert, alecdavis
   Coders: alecdavis

   ASTERISK-21742: SIP Session-Expires: Set timer to correctly expire at
   (~2/3) of the expiry interval when not the refresher.
   Revision: 387344
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Channels/chan_sip/Interoperability

   ASTERISK-21664: Asterisk terminates calls if Session-Expires isn't present
   on INVITE
   Revision: 387312
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Core/Bridging

   ASTERISK-21356: Segfault during bridge channel proxy inspection in a
   masquerade caused by an AMI Redirect of two channels
   Revision: 386256
   Reporter: greenlightcrm
   Testers: William luke
   Coders: rmudgett

  Category: Core/Channels

   ASTERISK-21356: Segfault during bridge channel proxy inspection in a
   masquerade caused by an AMI Redirect of two channels
   Revision: 386256
   Reporter: greenlightcrm
   Testers: William luke
   Coders: rmudgett

  Category: Core/Configuration

   ASTERISK-21412: [patch] config.c/config_text_file_load() leaks globbuf
   Revision: 386672
   Reporter: coreyfarrell
   Coders: Corey Farrell

  Category: Core/General

   ASTERISK-21407: [patch] features_shutdown doesn't finish cleanup
   Revision: 386641
   Reporter: coreyfarrell
   Coders: Corey Farrell

   ASTERISK-21716: [patch] logger thread sometimes exits with messages still
   queued
   Revision: 389676
   Reporter: coreyfarrell
   Coders: Corey Farrell

   ASTERISK-21724: [patch] __ast_rwlock_destroy can segfault with
   DEBUG_THREADS
   Revision: 388838
   Reporter: coreyfarrell
   Coders: Corey Farrell

   ASTERISK-21743: [patch] - Core show Locks, Include Asterisk version.
   Revision: 387294
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Core/ManagerInterface

   ASTERISK-21397: [patch] manager crash on unloading app_queue
   Revision: 385593
   Reporter: pk16208
   Testers: Corey Farrell
   Coders: elguero

  Category: Core/PBX

   ASTERISK-21723: [patch] pbx cleanup is incomplete
   Revision: 388532
   Reporter: coreyfarrell
   Coders: Correy Farrell

  Category: Resources/res_config_ldap

   ASTERISK-17386: [patch] res_config_ldap with malloc_debug produces
   munmap_chunk(): invalid pointer:
   Revision: 385190
   Reporter: jcovert
   Testers: Andrew Latham
   Coders: seanbright

  Category: Resources/res_jabber

   ASTERISK-21429: Distributed Device State using JABBER/XMPP not working
   since Secuity Advisory AST-2012-015
   Revision: 385916
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Resources/res_musiconhold

   ASTERISK-17467: external moh is blocked when using dahdi timer
   Revision: 386109
   Reporter: isrl
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

  Category: Resources/res_rtp_asterisk

   ASTERISK-21246: [patch] use of rtpkeepalive uses CN packet with marker bit
   set, plus a ULAW payload instead of CN
   Revision: 388111
   Reporter: pk16208
   Testers: Peter Katzmann, elguero
   Coders: elguero

   ASTERISK-21522: [patch] DTMF end is not always processed, causes one-way
   audio
   Revision: 387213
   Reporter: coreyfarrell
   Coders: Corey Farrell

  Category: Resources/res_srtp

   ASTERISK-21719: [patch] res_srtp doesn't cleanup srtp library
   Revision: 388529
   Reporter: coreyfarrell
   Coders: Corey Farrell

   ASTERISK-21719: [patch] res_srtp doesn't cleanup srtp library
   Revision: 388768
   Reporter: coreyfarrell
   Coders: kmoore

  Category: Resources/res_timing_pthread

   ASTERISK-17436: random deadlocks - SIP messages not being processed
   Revision: 386109
   Reporter: usinternet
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-17458: Deadlocks when using pthread timer
   Revision: 386109
   Reporter: isrl
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-19754: Deadlock in chan_sip / pthread_timing
   Revision: 386109
   Reporter: nikola.ciprich
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-20577: Asterisk deadlocks waiting for timer in res_timing_pthread
   while running AGI script
   Revision: 386109
   Reporter: kiennd
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

   ASTERISK-21389: res_timing_pthread fails to return from write, causing
   timer dependent operations to block indefinitely
   Revision: 386109
   Reporter: mjordan
   Testers: sruffell, mjordan, Tony Lewis
   Coders: sruffell

  Category: Resources/res_xmpp

   ASTERISK-21069: xmpp distributed device states aggregation update fails
   Revision: 385916
   Reporter: mpaland
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21164: Need clarification on distributed device state behavior
   and whether this behavior is a possible regression
   Revision: 385916
   Reporter: rnewton
   Testers: alecdavis
   Coders: alecdavis

   ASTERISK-21429: Distributed Device State using JABBER/XMPP not working
   since Secuity Advisory AST-2012-015
   Revision: 385916
   Reporter: alecdavis
   Testers: alecdavis
   Coders: alecdavis

  Category: Sounds

   ASTERISK-19431: Asterisk Russian language support missing voicemail
   prompts
   Revision: 386877
   Reporter: volga629
   Coders: newtonr

   ASTERISK-19721: Asterisk core sounds, italian version
   Revision: 386877
   Reporter: floradio
   Coders: newtonr

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   directly close an issue from the issue tracker. The commits may have been
   marked as being related to an issue. If that is the case, the issue
   numbers are listed here, as well.

   +------------------------------------------------------------------------+
   | Revision | Author     | Summary                    | Issues Referenced |
   |----------+------------+----------------------------+-------------------|
   | 384410   | dlee       | Fix parallel make          |                   |
   |          |            | problems.                  |                   |
   |----------+------------+----------------------------+-------------------|
   | 384544   | dlee       | Fixed spurious rebuilds of |                   |
   |          |            | func_version.              |                   |
   |----------+------------+----------------------------+-------------------|
   | 384640   | mjordan    | Update documentation for   |                   |
   |          |            | CHANNEL function           |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Modified the list of keys  |                   |
   | 385047   | newtonr    | for the driver backends    |                   |
   |          |            | for sake of sample clarity |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | IAX2, prevent network      |                   |
   | 385402   | alecdavis  | thread starting before all | ASTERISK-18827    |
   |          |            | helper threads are ready   |                   |
   |----------+------------+----------------------------+-------------------|
   | 385429   | alecdavis  | IAX2 defer_full_frames     | ASTERISK-18827    |
   |          |            | fail to get sent           |                   |
   |----------+------------+----------------------------+-------------------|
   | 385683   | dlee       | Fix the svn:keywords       |                   |
   |          |            | property on several files. |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Don't unnecessarily        |                   |
   | 385745   | qwell      | rebuild things on every    |                   |
   |          |            | run of 'make'.             |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | cli.c: Properly initialize |                   |
   | 386049   | dlee       | debug_modules and          |                   |
   |          |            | verbose_modules.           |                   |
   |----------+------------+----------------------------+-------------------|
   | 386483   | elguero    | Change Case On Forcerport  |                   |
   |          |            | For Consistency            |                   |
   |----------+------------+----------------------------+-------------------|
   | 386792   | oej        | Play periodic prompst for  |                   |
   |          |            | first call in a call queue |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Use the proper lower bound |                   |
   | 386929   | seanbright | when doing saturation      |                   |
   |          |            | arithmetic.                |                   |
   |----------+------------+----------------------------+-------------------|
   | 387421   | mjordan    | Update utils Makefile to   |                   |
   |          |            | handle r387294             |                   |
   |----------+------------+----------------------------+-------------------|
   | 387688   | russell    | Make SLA reload more       |                   |
   |          |            | paranoid.                  |                   |
   |----------+------------+----------------------------+-------------------|
   | 388376   | mmichelson | Fix memory leak in         |                   |
   |          |            | pbx_dundi                  |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | Add version.c to list of   |                   |
   | 388423   | rmudgett   | ignored files in the utils |                   |
   |          |            | directory.                 |                   |
   |----------+------------+----------------------------+-------------------|
   | 388596   | kmoore     | Revert r388529 for now     |                   |
   |----------+------------+----------------------------+-------------------|
   | 389244   | qwell      | Add doxygen.log to         |                   |
   |          |            | svn:ignore property.       |                   |
   |----------+------------+----------------------------+-------------------|
   | 391065   | alecdavis  | IAX2: refactor             |                   |
   |          |            | nativebridge transfer      |                   |
   |----------+------------+----------------------------+-------------------|
   | 391107   | alecdavis  | fix bad edit after         |                   |
   |          |            | conflict resolution        |                   |
   |----------+------------+----------------------------+-------------------|
   |          |            | chan_iax2: nativebridge    |                   |
   | 391143   | alecdavis  | refactor, missed unlock    |                   |
   |          |            | bridgecallno               |                   |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 CHANGES                                  |    9
 Makefile                                 |   25 -
 UPGRADE.txt                              |   10
 addons/chan_ooh323.c                     |    7
 apps/app_meetme.c                        |   11
 apps/app_queue.c                         |   21 +
 apps/app_voicemail.c                     |   48 ++-
 channels/chan_alsa.c                     |    7
 channels/chan_dahdi.c                    |   40 ++-
 channels/chan_iax2.c                     |  114 +++++---
 channels/chan_sip.c                      |  394 ++++++++++++++++++-------------
 channels/misdn/isdn_msg_parser.c         |    2
 channels/sig_pri.c                       |    4
 channels/sig_pri.h                       |    2
 channels/sip/include/sip.h               |    1
 configs/chan_dahdi.conf.sample           |   12
 configs/extconfig.conf.sample            |    6
 configs/queues.conf.sample               |    7
 configure.ac                             |    3
 contrib/realtime/mysql/sippeers.sql      |    2
 contrib/realtime/postgresql/realtime.sql |    2
 funcs/func_channel.c                     |   14 +
 include/asterisk/autoconfig.h.in         |    3
 include/asterisk/utils.h                 |   12
 main/channel.c                           |   23 +
 main/cli.c                               |    4
 main/config.c                            |    6
 main/devicestate.c                       |   13 -
 main/features.c                          |   27 +-
 main/lock.c                              |    2
 main/logger.c                            |    4
 main/manager.c                           |    2
 main/pbx.c                               |    5
 main/slinfactory.c                       |    8
 main/utils.c                             |    6
 pbx/pbx_dundi.c                          |    3
 res/res_config_ldap.c                    |   20 -
 res/res_jabber.c                         |    5
 res/res_mutestream.c                     |    2
 res/res_rtp_asterisk.c                   |   19 -
 res/res_rtp_multicast.c                  |   42 +++
 res/res_srtp.c                           |    3
 res/res_timing_pthread.c                 |  121 ++++-----
 sounds/Makefile                          |    5
 utils/Makefile                           |    6
 45 files changed, 703 insertions(+), 379 deletions(-)

     ----------------------------------------------------------------------
