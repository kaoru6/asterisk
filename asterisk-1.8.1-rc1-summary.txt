                                Release Summary

                               asterisk-1.8.1-rc1

                                Date: 2010-11-16

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release includes only bug fixes. The changes included were made only
   to address problems that have been identified in this release series.
   Users should be able to safely upgrade to this version if this release
   series is already in use. Users considering upgrading from a previous
   release series are strongly encouraged to review the UPGRADE.txt document
   as well as the CHANGES document for information about upgrading to this
   release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-1.8.0.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were closed by commits that went into this
   release.

     Coders                Testers                       Reporters            
   13 rmudgett           3 pabelanger                  2 pabelanger           
   10 tilghman           3 tilghman                    2 wdoekes              
   9 jpeeler             2 lmadsen                     1 abelbeck             
   8 twilson             2 zerohalo                    1 antonio              
   6 pabelanger          1 falves11                    1 bwg                  
   4 russell             1 jcovert                     1 chodorenko           
   3 dvossel             1 Nic Colledge (mailing list) 1 DennisD              
   2 bbryant             1 one47                       1 frawd                
   1 alecdavis           1 orn                         1 globalnetinc         
   1 jcovert             1 rgenthner                   1 jcollie              
   1 junky               1 suretec                     1 jcovert              
   1 klaus3000           1 sustav                      1 jmls                 
   1 lmadsen             1 tpanton                     1 junky                
   1 mmichelson          1 wdoekes                     1 klaus3000            
   1 mnicholson                                        1 lftsy                
   1 one47                                             1 netfuse              
   1 sruffell                                          1 one47                
   1 wdoekes                                           1 orn                  
                                                       1 scramatte            
                                                       1 smallet              
                                                       1 sustav               
                                                       1 tpanton              
                                                       1 zerohalo             

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Category: Applications/app_voicemail

   #18128: [patch] application not properly unregister in voicemail
   Revision: 292436
   Reporter: junky
   Testers: pabelanger, lmadsen
   Coders: junky

   #18240: [patch] VoicemailMain Exits Without Warning
   Revision: 294905
   Reporter: netfuse
   Testers: pabelanger
   Coders: alecdavis

  Category: Channels/chan_dahdi

   #17270: getting warning message every 4 seconds
   Revision: 294823
   Reporter: jmls
   Coders: rmudgett

  Category: Channels/chan_iax2

   #18110: Playback stalls when playing demo-congrats to an IAX2 channel
   Revision: 294278
   Reporter: tpanton
   Testers: tpanton
   Coders: jpeeler

   #18202: [patch] IAX2 registration issues
   Revision: 293496
   Reporter: pabelanger
   Testers: pabelanger, Nic Colledge (mailing list)
   Coders: pabelanger

  Category: Channels/chan_sip/CodecHandling

   #17403: [patch] RTP directmedia is broken in some cases
   Revision: 293493
   Reporter: one47
   Testers: one47, falves11
   Coders: one47

  Category: Channels/chan_sip/General

   #16382: [patch] SIP OPTIONS qualify message forever
   Revision: 294734
   Reporter: lftsy
   Testers: zerohalo
   Coders: jpeeler

   #17949: [patch] Mutex 'dialog' freed more times than we've locked ! and
   Error releasing mutex.
   Revision: 294084
   Reporter: bwg
   Coders: bbryant

   #17985: New calls generate ambiguous message on the Asterisk console
   Revision: 293305
   Reporter: globalnetinc
   Coders: jpeeler

   #18123: rtautoclear = no or rtautoclear = 0 not respected in sip.conf
   Revision: 293724
   Reporter: zerohalo
   Coders: jpeeler

   #18176: [patch] record priv-recordintro as sln, not gsm
   Revision: 292413
   Reporter: pabelanger
   Coders: pabelanger

   #18200: chan_sip hangs
   Revision: 294084
   Reporter: DennisD
   Coders: bbryant

  Category: Channels/chan_sip/Interoperability

   #17878: [patch] chan_sip fails to remove hold when receving a reINVITE
   without SDP
   Revision: 294243
   Reporter: frawd
   Coders: mnicholson

  Category: Channels/chan_sip/TCP-TLS

   #17779: [patch] tcptls.c:350 Unable to connect SIP socket Connection
   refused
   Revision: 294734
   Reporter: smallet
   Testers: zerohalo
   Coders: jpeeler

  Category: Core/BuildSystem

   #16155: [patch] Use pkg-config to find gmime libraries.
   Revision: 294430
   Reporter: jcollie
   Testers: tilghman
   Coders: tilghman

  Category: Core/General

   #18282: [patch] better debug message in devicestate.c
   Revision: 294501
   Reporter: klaus3000
   Coders: klaus3000

  Category: Core/ManagerInterface

   #18167: [patch] A call locks when sending SIP originate from AMI script
   Revision: 292595
   Reporter: sustav
   Testers: sustav
   Coders: dvossel

   #18248: [patch] sippeers command in AMI has incorrect output
   Revision: 293887
   Reporter: orn
   Testers: orn
   Coders: pabelanger

  Category: Core/PBX

   #18165: [patch] hint state changes deadlock problem
   Revision: 294640
   Reporter: antonio
   Coders: jpeeler

  Category: Functions/func_curl

   #18161: [patch] crashing func_curl hashcompat with invalid data
   Revision: 294989
   Reporter: wdoekes
   Testers: tilghman
   Coders: tilghman

  Category: Functions/func_strings

   #18060: [patch] func_string FILTER contains an infinite loop
   Revision: 293159
   Reporter: wdoekes
   Testers: wdoekes
   Coders: wdoekes

  Category: PBX/pbx_spool

   #18089: [patch] Call files generate two warning logs after each successful
   completion
   Revision: 294569
   Reporter: abelbeck
   Testers: tilghman
   Coders: tilghman

  Category: Resources/res_config_ldap

   #13861: [patch] ERROR[23999]: res_config_ldap.c:1292 update_ldap: Couldn't
   modify ... Undefined attribute type
   Revision: 292787
   Reporter: scramatte
   Testers: lmadsen, jcovert, suretec, rgenthner
   Coders: lmadsen

   #17376: [patch] res_ldap.conf points md5secret to RealmedPassword, but the
   schema uses AstAccountRealmedPassword
   Revision: 292557
   Reporter: jcovert
   Coders: jcovert

  Category: Resources/res_srtp

   #18140: SRTP enable disable from dialplan
   Revision: 292309
   Reporter: chodorenko
   Coders: twilson

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   directly close an issue from the issue tracker. The commits may have been
   marked as being related to an issue. If that is the case, the issue
   numbers are listed here, as well.

   +------------------------------------------------------------------------+
   | Revision | Author     | Summary                           | Issues     |
   |          |            |                                   | Referenced |
   |----------+------------+-----------------------------------+------------|
   | 292343   | pabelanger | Add resample and imap_tk          |            |
   |          |            | dependencies.                     |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Oops. This module uses the        |            |
   | 292376   | tilghman   | generic timer and no longer uses  |            |
   |          |            | DAHDI.                            |            |
   |----------+------------+-----------------------------------+------------|
   | 292489   | rmudgett   | Send CONNECT_ACKNOWLEDGE for CIS  |            |
   |          |            | calls too.                        |            |
   |----------+------------+-----------------------------------+------------|
   | 292523   | russell    | Add var=value to log message on   |            |
   |          |            | update failure, and add newline.  |            |
   |----------+------------+-----------------------------------+------------|
   | 292628   | pabelanger | Fix typo in SUSE init script.     |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Compile correctly on Linux        |            |
   | 292667   | tilghman   | (asterisk/localtime.h depends     |            |
   |          |            | upon asterisk/autoconfig.h        |            |
   |          |            | loading first).                   |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Connected line is not updated     |            |
   | 292704   | rmudgett   | when chan_dahdi/sig_pri or        |            |
   |          |            | chan_misdn transfers a call.      |            |
   |----------+------------+-----------------------------------+------------|
   | 292740   | twilson    | Add TLS cert helper script        |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Prevent multiple runs of          |            |
   | 292741   | mmichelson | event_sub_test from producing     |            |
   |          |            | false failure results.            |            |
   |----------+------------+-----------------------------------+------------|
   | 292794   | twilson    | Make files readable only by the   |            |
   |          |            | owner                             |            |
   |----------+------------+-----------------------------------+------------|
   | 292825   | twilson    | Don't create directories without  |            |
   |          |            | at least o+x                      |            |
   |----------+------------+-----------------------------------+------------|
   | 292868   | dvossel    | This patch turns chan_local pvts  |            |
   |          |            | into astobj2 objects.             |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Allow the DAHDI driver to         |            |
   | 292906   | tilghman   | compile, even with a sufficiently |            |
   |          |            | older version of libpri.          |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Several more defines that need to |            |
   | 292969   | tilghman   | be altered for compiling against  |            |
   |          |            | an older version of libpri        |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Allow the DAHDI driver to         |            |
   | 293046   | rmudgett   | compile, even with a sufficiently |            |
   |          |            | older version of libpri.          |            |
   |----------+------------+-----------------------------------+------------|
   | 293081   | rmudgett   | No need to define the struct if   |            |
   |          |            | there are no users.               |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Fix inprocess_container in        |            |
   | 293119   | jpeeler    | voicemail to correctly restrict   |            |
   |          |            | max messages.                     |            |
   |----------+------------+-----------------------------------+------------|
   | 293197   | tilghman   | "!00" evaluated as false, which   |            |
   |          |            | is incorrect. Fixing.             |            |
   |----------+------------+-----------------------------------+------------|
   | 293341   | rmudgett   | Remove some code that serves no   |            |
   |          |            | purpose.                          |            |
   |----------+------------+-----------------------------------+------------|
   | 293418   | rmudgett   | Remove some more code that serves |            |
   |          |            | no purpose.                       |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Analog 3-way call would not       |            |
   | 293530   | rmudgett   | connect all parties if one was    |            |
   |          |            | using sig_pri.                    |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | If manager and tls are disabled,  |            |
   | 293611   | pabelanger | do not display TCP/TLS            |            |
   |          |            | Bindaddress.                      |            |
   |----------+------------+-----------------------------------+------------|
   | 293648   | rmudgett   | Make warning message have more    |            |
   |          |            | useful information in it.         |            |
   |----------+------------+-----------------------------------+------------|
   | 293803   | twilson    | Avoid valgrind warnings for       |            |
   |          |            | ast_rtp_instance_get_xxx_address  |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Party A in an analog 3-way call   |            |
   | 293807   | rmudgett   | would continue to hear ringback   |            |
   |          |            | after party C answers.            |            |
   |----------+------------+-----------------------------------+------------|
   | 293924   | dvossel    | Fixes ringback tone on sip        |            |
   |          |            | semi-attended transfer.           |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | codecs/codec_dahdi: Prevent       |            |
   | 293970   | sruffell   | "choppy" audio when receiving     |            |
   |          |            | unexpected frame sizes.           |            |
   |----------+------------+-----------------------------------+------------|
   | 294047   | twilson    | Tell people to use the correct    |            |
   |          |            | common name for clients as well   |            |
   |----------+------------+-----------------------------------+------------|
   | 294049   | twilson    | Corret spelling and example       |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | valgrind reported references to   |            |
   | 294125   | rmudgett   | freed memory during a mISDN       |            |
   |          |            | hangup collision.                 |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Set a default waittime, and make  |            |
   | 294207   | twilson    | sure to convert it to             |            |
   |          |            | milliseconds                      |            |
   |----------+------------+-----------------------------------+------------|
   | 294313   | jpeeler    | add missing unlock not present in |            |
   |          |            | 294277                            |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Analog lines do not transfer      |            |
   | 294349   | rmudgett   | CONNECTED LINE or execute the     |            |
   |          |            | interception macros.              |            |
   |----------+------------+-----------------------------------+------------|
   | 294466   | rmudgett   | Allow ast_do_masquerade() failure |            |
   |          |            | to be reported again.             |            |
   |----------+------------+-----------------------------------+------------|
   | 294535   | russell    | Tweak a couple of CLI commands    |            |
   |          |            | back to their original form.      |            |
   |----------+------------+-----------------------------------+------------|
   | 294605   | tilghman   | Fixing the Mac OS X build (bamboo |            |
   |          |            | warning)                          |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Remove most of the contents of    |            |
   | 294740   | russell    | the doc dir in favor of the wiki  |            |
   |          |            | content.                          |            |
   |----------+------------+-----------------------------------+------------|
   | 294745   | russell    | Remove CCSS architecture PDF.     |            |
   |----------+------------+-----------------------------------+------------|
   |          |            | Return correct error code if lock |            |
   |          |            | path fails. The recent changes to |            |
   | 294911   | jpeeler    | open_mailbox actually caused it   |            |
   |          |            | to be fixed, but let's be         |            |
   |          |            | consistent.                       |            |
   |----------+------------+-----------------------------------+------------|
   | 295078   | tilghman   | Create test verifying results of  |            |
   |          |            | expression parser                 |            |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 Makefile                                |    9
 UPGRADE.txt                             |    4
 apps/app_dial.c                         |    2
 apps/app_voicemail.c                    |  118 +++
 build_tools/prep_tarball                |   20
 channels/chan_dahdi.c                   |   84 +-
 channels/chan_iax2.c                    |    9
 channels/chan_local.c                   |  406 +++++++------
 channels/chan_misdn.c                   |  417 +++++++------
 channels/chan_sip.c                     |  162 +++--
 channels/misdn/ie.c                     |    1
 channels/sig_analog.c                   |  212 +++---
 channels/sig_analog.h                   |    3
 channels/sig_pri.c                      |  260 ++++++--
 channels/sig_pri.h                      |    2
 codecs/codec_dahdi.c                    |    8
 configs/calendar.conf.sample            |    6
 configs/res_ldap.conf.sample            |   36 -
 configure.ac                            |   19
 contrib/init.d/rc.suse.asterisk         |    2
 contrib/scripts/ast_tls_cert            |  186 ++++++
 contrib/scripts/asterisk.ldif           |  171 ++++-
 contrib/scripts/install_prereq          |    1
 doc/CODING-GUIDELINES                   |  982 --------------------------------
 doc/HOWTO_collect_debug_information.txt |   89 --
 doc/India-CID.txt                       |   75 --
 doc/PEERING                             |  503 ----------------
 doc/README.txt                          |   10
 doc/advice_of_charge.txt                |  189 ------
 doc/asterisk-mib.txt                    |  778 -------------------------
 doc/backtrace.txt                       |  277 ---------
 doc/building_queues.txt                 |  823 --------------------------
 doc/callfiles.txt                       |  139 ----
 doc/chan_sip-perf-testing.txt           |  110 ---
 doc/cli.txt                             |   33 -
 doc/codec-64bit.txt                     |   47 -
 doc/database_transactions.txt           |   29
 doc/datastores.txt                      |   63 --
 doc/digium-mib.txt                      |   24
 doc/distributed_devstate-XMPP.txt       |  433 --------------
 doc/distributed_devstate.txt            |  320 ----------
 doc/externalivr.txt                     |  197 ------
 doc/followme.txt                        |   32 -
 doc/google-soc2009-ideas.txt            |    3
 doc/hoard.txt                           |   38 -
 doc/jabber.txt                          |  107 ---
 doc/janitor-projects.txt                |   28
 doc/jingle.txt                          |   10
 doc/ldap.txt                            |   65 --
 doc/macroexclusive.txt                  |   78 --
 doc/manager_1_1.txt                     |  454 --------------
 doc/modules.txt                         |   25
 doc/osp.txt                             |  747 ------------------------
 doc/queue.txt                           |   39 -
 doc/realtimetext.txt                    |   84 --
 doc/res_config_sqlite.txt               |  124 ----
 doc/rtp-packetization.txt               |   75 --
 doc/sip-retransmit.txt                  |  126 ----
 doc/siptls.txt                          |   97 ---
 doc/smdi.txt                            |  137 ----
 doc/sms.txt                             |  147 ----
 doc/snmp.txt                            |   53 -
 doc/speechrec.txt                       |  295 ---------
 doc/ss7.txt                             |  116 ---
 doc/timing.txt                          |   90 --
 doc/unistim.txt                         |  127 ----
 doc/valgrind.txt                        |   24
 doc/video.txt                           |   47 -
 doc/video_console.txt                   |  159 -----
 doc/voicemail_odbc_postgresql.txt       |  454 --------------
 funcs/func_curl.c                       |    5
 funcs/func_strings.c                    |    6
 include/asterisk.h                      |    1
 include/asterisk/channel.h              |   46 +
 include/asterisk/rtp_engine.h           |   57 +
 include/asterisk/timing.h               |   10
 main/ast_expr2.c                        |  566 +++++++++++-------
 main/ast_expr2.h                        |   69 --
 main/ast_expr2.y                        |    4
 main/asterisk.c                         |    1
 main/channel.c                          |  257 +++++++-
 main/devicestate.c                      |    3
 main/manager.c                          |    9
 main/pbx.c                              |  303 ++++++---
 main/rtp_engine.c                       |   16
 main/timing.c                           |    5
 pbx/pbx_spool.c                         |  163 +++--
 res/ael/ael.tab.c                       |  978 +++++++++++++++++++++++--------
 res/ael/ael.tab.h                       |   87 --
 res/ael/ael_lex.c                       |   32 -
 res/ais/clm.c                           |    4
 res/ais/evt.c                           |    4
 res/res_calendar.c                      |    6
 res/res_config_ldap.c                   |    3
 res/res_musiconhold.c                   |    3
 res/res_srtp.c                          |   10
 res/res_timing_timerfd.c                |   10
 tests/test_event.c                      |    2
 tests/test_expr.c                       |  191 ++++++
 99 files changed, 3417 insertions(+), 10474 deletions(-)

     ----------------------------------------------------------------------
