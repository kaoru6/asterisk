                                Release Summary

                             asterisk-1.6.1.18-rc1

                                Date: 2010-03-04

                           <asteriskteam@digium.com>

     ----------------------------------------------------------------------

                               Table of Contents

    1. Summary
    2. Contributors
    3. Closed Issues
    4. Other Changes
    5. Diffstat

     ----------------------------------------------------------------------

                                    Summary

                                 [Back to Top]

   This release includes only bug fixes. The changes included were made only
   to address problems that have been identified in this release series.
   Users should be able to safely upgrade to this version if this release
   series is already in use. Users considering upgrading from a previous
   release series are strongly encouraged to review the UPGRADE.txt document
   as well as the CHANGES document for information about upgrading to this
   release series.

   The data in this summary reflects changes that have been made since the
   previous release, asterisk-1.6.1.14.

     ----------------------------------------------------------------------

                                  Contributors

                                 [Back to Top]

   This table lists the people who have submitted code, those that have
   tested patches, as well as those that reported issues on the issue tracker
   that were resolved in this release. For coders, the number is how many of
   their patches (of any size) were committed into this release. For testers,
   the number is the number of times their name was listed as assisting with
   testing a patch. Finally, for reporters, the number is the number of
   issues that they reported that were closed by commits that went into this
   release.

     Coders                   Testers                  Reporters              
   15 tilghman              6 tilghman               2 bklang                 
   10 dvossel               3 dvossel                2 davidw                 
   6 lmadsen                1 bloodoff               2 elsto                  
   6 mmichelson             1 Chainsaw               2 tim_ringenbach         
   5 jpeeler                1 corruptor              1 alecdavis              
   3 alecdavis              1 davidw                 1 alexanderheinz         
   2 kpfleming              1 elsto                  1 barthpbx               
   2 qwell                  1 jamhed                 1 bluefox                
   2 russell                1 jsmith                 1 Brian                  
   2 seanbright             1 kenny                  1 dodo                   
   2 tim                    1 lmadsen                1 exarv                  
   1 bklang                 1 mattbrown              1 hevad                  
   1 dodo                   1 mikeeccleston          1 jamhed                 
   1 jedi98                 1 misaksen               1 jedi98                 
   1 mnicholson             1 mmichelson             1 kjotte                 
   1 pprindeville           1 mnicholson             1 kobaz                  
   1 raarts                 1 pwalker                1 krn                    
   1 rain                   1 raarts                 1 michaesc               
   1 rmudgett               1 rain                   1 pprindeville           
   1 thirionjwf             1 tzafrir                1 pwalker                
   1 vrban                  1 whardier               1 raarts                 
                                                     1 rain                   
                                                     1 thirionjwf             
                                                     1 tomo1657               
                                                     1 vlad                   
                                                     1 vrban                  
                                                     1 wdoekes                
                                                     1 whardier               

     ----------------------------------------------------------------------

                                 Closed Issues

                                 [Back to Top]

   This is a list of all issues from the issue tracker that were closed by
   changes that went into this release.

  Category: Applications/app_chanspy

   #16678: [patch] segfault on chanspy due to race in main/channel.c
   Revision: 246548
   Reporter: tim_ringenbach
   Testers: dvossel
   Coders: tim

  Category: Applications/app_dial

   #16686: [patch] app_dial does not respect GOSUB_RESULT
   Revision: 244394
   Reporter: bklang
   Coders: bklang

  Category: Applications/app_fax

   #16361: [patch] Asterisk crashes after receiving fax with 'double free'
   Revision: 245731
   Reporter: vlad
   Testers: kenny, bloodoff, misaksen
   Coders: tilghman

  Category: Applications/app_queue

   #16677: [patch] deadlock in app_queue with use_weight during reload
   Revision: 246119
   Reporter: tim_ringenbach
   Coders: tim

  Category: Applications/app_transfer

   #16331: [patch] A blind transfer results in a call with empty accountcode
   in a specific circumstance
   Revision: 247654
   Reporter: bluefox
   Testers: mnicholson
   Coders: mnicholson

  Category: Applications/app_voicemail

   #15654: [patch] Missing new-message notification for urgent messages
   Revision: 249189
   Reporter: tomo1657
   Testers: tilghman
   Coders: tilghman

   #16448: Voicemail messages flagged as urgent do not get emailed
   Revision: 249189
   Reporter: hevad
   Testers: tilghman
   Coders: tilghman

   #16921: [patch] VoiceMail(vmbox@context,s) -> Regularly segfaults asterisk
   Revision: 249674
   Reporter: whardier
   Testers: whardier
   Coders: seanbright

   #16927: [patch] Segfault branches, and trunk, when DAHDI FXS port goes off
   hook
   Revision: 249492
   Reporter: alecdavis
   Coders: tilghman

  Category: Channels/chan_dahdi

   #14163: [patch] UK (BT) lines produce uncleared red alarm on TDM400P
   during line tests
   Revision: 250483
   Reporter: jedi98
   Testers: mattbrown, Chainsaw, mikeeccleston
   Coders: jedi98

   #16359: [patch] Only the last setvar is effective for a given channel
   Revision: 244507
   Reporter: raarts
   Testers: raarts
   Coders: raarts

  Category: Channels/chan_iax2

   #15997: [patch] segfault in 1.6.1.6 in _ao2_find, called from chan_iax2
   after approx. 75.000 calls
   Revision: 245795
   Reporter: exarv
   Coders: dvossel

   #16904: [patch] [regression] Duplicate TXREQ packets will cause chan_iax2
   to reject an unrelated call in the future
   Revision: 250397
   Reporter: rain
   Testers: rain, dvossel
   Coders: rain

  Category: Channels/chan_local

   #14992: [patch] [regression] #0013747 not fixed for local channel
   (Indications are not passed from old peer to new peer during masquerad
   Revision: 246072
   Reporter: davidw
   Coders: jpeeler

   #16637: [patch] Dial option 'L' does not work correctly when a local
   channel is involved
   Revision: 250611
   Reporter: kobaz
   Testers: lmadsen, jsmith, mmichelson
   Coders: lmadsen

  Category: Channels/chan_sip/DatabaseSupport

   #16683: [patch] warning about "Invalid peer port configuration" for
   realtime
   Revision: 247790
   Reporter: wdoekes
   Coders: tilghman

  Category: Channels/chan_sip/T.38

   #16485: after udp error sip phones get kicked
   Revision: 244446
   Reporter: elsto
   Coders: dvossel

   #16517: Segfault while setting up T.38 fax reception
   Revision: 244446
   Reporter: bklang
   Coders: dvossel

   #16634: asterisk crashes while fax sending
   Revision: 244446
   Reporter: krn
   Coders: dvossel

   #16724: coredump on T.38 Session with 1.6.2.1
   Revision: 244446
   Reporter: barthpbx
   Coders: dvossel

   #16792: [patch] 606 Not Acceptable is also a valid response to reject a
   T.38 re-INVITE
   Revision: 249103
   Reporter: vrban
   Coders: vrban

  Category: Channels/chan_sip/Transfers

   #16862: [patch] [regression] One-legged Transfer (INVITE / Replaces) not
   working anymore
   Revision: 248399
   Reporter: pwalker
   Testers: pwalker, dvossel
   Coders: dvossel

  Category: Core/BuildSystem

   #16596: [patch] LD (llinker) options not used by main/ and channels/
   builds
   Revision: 245580
   Reporter: pprindeville
   Testers: tilghman
   Coders: pprindeville

  Category: Core/General

   #16786: [patch] Remove coloring escape sequences from log files.
   Revision: 248641
   Reporter: dodo
   Testers: tilghman
   Coders: dodo

  Category: Core/PBX

   #16802: [patch] Unable to open pid file '/var/run/asterisk/asterisk.pid':
   No such file or directory
   Revision: 248863
   Reporter: Brian
   Testers: tzafrir
   Coders: tilghman

  Category: Core/Portability

   #16673: [patch] TLS socket file descriptor fails to open (with no error
   message in log)
   Revision: 246983
   Reporter: michaesc
   Coders: dvossel

  Category: Documentation

   #16267: [patch] unanswered has no effect
   Revision: 250048
   Reporter: elsto
   Testers: davidw, elsto
   Coders: lmadsen

   #16855: Template examples in documentation imply well defined overriding
   semantics, but this is not true
   Revision: 250039
   Reporter: davidw
   Coders: lmadsen

  Category: General

   #16062: [patch] Asterisk crashes after "core stop gracefully"
   Revision: 248009
   Reporter: alexanderheinz
   Testers: tilghman
   Coders: tilghman

   #16470: [patch] 'core stop when convenient' causes segfault
   Revision: 248009
   Reporter: kjotte
   Testers: tilghman
   Coders: tilghman

  Category: PBX/General

   #16816: [patch] Attended transfer broken in 1.6.2.2
   Revision: 249548
   Reporter: jamhed
   Testers: jamhed, corruptor
   Coders: jpeeler

  Category: Resources/res_speech

   #16368: [patch] Asterisk crash when SpeechCreate() is used in dialplan
   without exact name of the module, using the default.
   Revision: 247843
   Reporter: thirionjwf
   Coders: thirionjwf

     ----------------------------------------------------------------------

                      Commits Not Associated with an Issue

                                 [Back to Top]

   This is a list of all changes that went into this release that did not
   directly close an issue from the issue tracker. The commits may have been
   marked as being related to an issue. If that is the case, the issue
   numbers are listed here, as well.

   +------------------------------------------------------------------------+
   | Revision | Author     | Summary                       | Issues         |
   |          |            |                               | Referenced     |
   |----------+------------+-------------------------------+----------------|
   |          |            | Initialize counters in        |                |
   | 244553   | mmichelson | ast_sched_report so that      |                |
   |          |            | resulting data is not bogus.  |                |
   |----------+------------+-------------------------------+----------------|
   | 244929   | seanbright | Update main copyright date.   |                |
   |----------+------------+-------------------------------+----------------|
   | 245095   | jpeeler    | Remove contrib/firmware       |                |
   |          |            | directory as it is empty      |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Remove reference of           |                |
   | 245499   | qwell      | documentation in source       |                |
   |          |            | directory.                    |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Fix return value of           |                |
   | 245625   | russell    | get_ie_str() and              |                |
   |          |            | get_ie_str_hash() for         |                |
   |          |            | non-existent IE.              |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Don't offer MMR or JBIG       |                |
   | 245682   | kpfleming  | transcoding during T.38       |                |
   |          |            | negotiation.                  |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Include examples of FILTER    |                |
   | 245947   | tilghman   | usage in extension patterns   |                |
   |          |            | where a "." may be a risk.    |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Enable warnings on atypical   |                |
   | 246024   | tilghman   | conditions for the FILTER     |                |
   |          |            | function (suggested by        |                |
   |          |            | mmichelson on the -dev list). |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Fix weird issue with unit     |                |
   | 246202   | tilghman   | tests on optimized build -    |                |
   |          |            | turned out to be a signing    |                |
   |          |            | issue.                        |                |
   |----------+------------+-------------------------------+----------------|
   | 246206   | tilghman   | Fussy compiler on another     |                |
   |          |            | machine...                    |                |
   |----------+------------+-------------------------------+----------------|
   | 246463   | qwell      | Fix some silly formatting     |                |
   |          |            | that made my head hurt.       |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Make the menuselect           |                |
   |          |            | instructions correct by       |                |
   | 246712   | tilghman   | allowing 'make menuselect' to |                |
   |          |            | actually solve dependency     |                |
   |          |            | problems.                     |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | fixes sample rate conversion  |                |
   | 246902   | dvossel    | issue with Monitor            |                |
   |          |            | application                   |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Add some clarifying           |                |
   | 246987   | mmichelson | documentation to the          |                |
   |          |            | ast_str_set and               |                |
   |          |            | ast_str_append functions.     |                |
   |----------+------------+-------------------------------+----------------|
   | 247078   | mmichelson | Add va_end calls to           |                |
   |          |            | __ast_str_helper.             |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Make sure that when autofill  |                |
   | 247171   | mmichelson | is disabled that callers not  |                |
   |          |            | in the front of the queue     |                |
   |          |            | cannot place calls.           |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Fix two problems in ast_str   |                |
   | 247336   | mmichelson | functions found while writing |                |
   |          |            | a unit test.                  |                |
   |----------+------------+-------------------------------+----------------|
   | 247425   | russell    | Tweak argument handling for   |                |
   |          |            | wget in the sounds Makefile.  |                |
   |----------+------------+-------------------------------+----------------|
   | 247505   | lmadsen    | Add best practices            | #16808, #16810 |
   |          |            | documentation.                |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Add additional link to best   |                |
   | 247511   | lmadsen    | practices document per        |                |
   |          |            | jsmith.                       |                |
   |----------+------------+-------------------------------+----------------|
   | 247946   | rmudgett   | Merged revision 247904 from   |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Ensure that monitor           |                |
   | 248796   | jpeeler    | recordings are written to the |                |
   |          |            | correct location.             |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Fix incorrect ACL behavior    |                |
   | 248948   | mmichelson | when CIDR notation of "/0" is |                |
   |          |            | used.                         |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Ensure that monitor           |                |
   | 248954   | jpeeler    | recordings are written to the |                |
   |          |            | correct location (again)      |                |
   |----------+------------+-------------------------------+----------------|
   | 249237   | kpfleming  | add a reference to the        |                |
   |          |            | now-published IAX2 RFC        |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | overlap receiving:            |                |
   | 249363   | alecdavis  | automatically send CALL       | #16789         |
   |          |            | PROCEEDING when dialplan      |                |
   |          |            | starts                        |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Properly document voicemail   |                |
   | 249406   | tilghman   | API documents. Also fix a     |                |
   |          |            | crash reported via the -dev   |                |
   |          |            | list.                         |                |
   |----------+------------+-------------------------------+----------------|
   |          |            | Constify a bit of             |                |
   | 249624   | tilghman   | app_voicemail, to make ODBC   |                |
   |          |            | and IMAP compile once again.  |                |
   |----------+------------+-------------------------------+----------------|
   | 249843   | alecdavis  | fixes ability to exit echo    | #16880         |
   |          |            | app                           |                |
   |----------+------------+-------------------------------+----------------|
   | 249896   | dvossel    | fixes adaptive jitterbuffer   |                |
   |          |            | configuration                 |                |
   |----------+------------+-------------------------------+----------------|
   | 249949   | alecdavis  | revert ability to exit echo   | #16880         |
   |          |            | app                           |                |
   |----------+------------+-------------------------------+----------------|
   | 250053   | lmadsen    | Update IMAP documentation.    | #16704         |
   |----------+------------+-------------------------------+----------------|
   |          |            | fixes signed to unsigned int  |                |
   | 250260   | dvossel    | comparision issue for         |                |
   |          |            | FaxMaxDatagram value.         |                |
   +------------------------------------------------------------------------+

     ----------------------------------------------------------------------

                                Diffstat Results

                                 [Back to Top]

   This is a summary of the changes to the source code that went into this
   release that was generated using the diffstat utility.

 LICENSE                            |   11
 Makefile                           |    3
 README-SERIOUSLY.bestpractices.txt |  295 +++++++++++++++++++++
 apps/app_dial.c                    |   10
 apps/app_fax.c                     |    9
 apps/app_queue.c                   |   21 -
 apps/app_voicemail.c               |  134 +++++----
 channels/Makefile                  |    4
 channels/chan_alsa.c               |    3
 channels/chan_console.c            |    4
 channels/chan_dahdi.c              |   38 ++
 channels/chan_gtalk.c              |    3
 channels/chan_h323.c               |    3
 channels/chan_iax2.c               |   16 -
 channels/chan_jingle.c             |    3
 channels/chan_local.c              |    4
 channels/chan_mgcp.c               |    3
 channels/chan_misdn.c              |   32 --
 channels/chan_oss.c                |    1
 channels/chan_sip.c                |  183 +++++++++----
 channels/chan_skinny.c             |    3
 channels/chan_unistim.c            |    5
 channels/chan_usbradio.c           |    1
 channels/misdn_config.c            |    1
 configs/alsa.conf.sample           |    7
 configs/cdr.conf.sample            |    6
 configs/chan_dahdi.conf.sample     |    7
 configs/console.conf.sample        |    7
 configs/extensions.conf.sample     |    4
 configs/mgcp.conf.sample           |    7
 configs/misdn.conf.sample          |    7
 configs/oss.conf.sample            |    7
 configs/sip.conf.sample            |    7
 configs/usbradio.conf.sample       |    7
 doc/tex/configuration.tex          |   32 +-
 doc/tex/imapstorage.tex            |    6
 doc/tex/localchannel.tex           |  518 ++++++++++++++++++++++++++++++++-----
 funcs/func_strings.c               |   37 +-
 include/asterisk/abstract_jb.h     |    7
 include/asterisk/app.h             |   39 ++
 include/asterisk/strings.h         |   19 -
 include/asterisk/udptl.h           |   16 +
 main/Makefile                      |    6
 main/abstract_jb.c                 |    5
 main/acl.c                         |    9
 main/ast_expr2.fl                  |    2
 main/ast_expr2f.c                  |    2
 main/asterisk.c                    |   16 +
 main/channel.c                     |   53 ++-
 main/event.c                       |    6
 main/features.c                    |    3
 main/loader.c                      |   47 ++-
 main/logger.c                      |    7
 main/sched.c                       |    1
 main/tcptls.c                      |    5
 main/udptl.c                       |   36 ++
 main/utils.c                       |    6
 res/res_monitor.c                  |   22 -
 res/res_speech.c                   |    3
 sounds/Makefile                    |    4
 60 files changed, 1416 insertions(+), 347 deletions(-)

     ----------------------------------------------------------------------
